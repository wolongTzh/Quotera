<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>公司风险热力图（分页）</title>
    <script src="https://cdn.jsdelivr.net/npm/echarts@5/dist/echarts.min.js"></script>
    <style>
        #main {
            width: 1000px;
            height: 600px;
            margin: 20px auto;
        }
        #pagination {
            text-align: center;
            margin-bottom: 20px;
        }
        #pagination button {
            margin: 0 5px;
            padding: 5px 10px;
            font-size: 14px;
            cursor: pointer;
        }
        #page-info {
            margin: 0 10px;
        }
    </style>
</head>
<body>
    <div id="pagination">
        <button id="prev-page">上一页</button>
        <span id="page-info"></span>
        <button id="next-page">下一页</button>
    </div>
    <div id="main"></div>

    <script>
        const risks = ['公司治理风险', '法律与合规风险', '财务与偿付风险', '信息披露风险', '经营稳定风险', '声誉与外部评级风险'];

        // 模拟 30 家公司
        const allCompanies = ["天齐锂业股份有限公司", "泉果基金", "诺德基金管理有限公司", "华附雅宝小学", "中富电路", "瑞纳萨斯州", "维蒙特工业", "希尔顿全球控股有限公司", "华夏理财", "射频技术", "Mr.Coingroup", "深圳巴士集团", "智付支付", "江河海洋", "必胜客", "常州市高级", "浙江汇民网络技术有限公司", "焦科维奇", "健身气功", "北京动物园", "小高", "达美航空", "IBM", "维谛技术控股公司", "泰卦传媒", "吉州窑褐釉梅花纹瓶", "人工智能", "平安理财", "银泰商业", "头图", "上港集团", "秀甲天下", "微松", "有轨电车", "伊诺维奥制药", "coergy", "海尔和卡萨", "Open#", "首钢园", "中冶钢构华东分公司", "我妈", "广州楼市", "海南省非遗展示中心", "海口新海港", "王府井国际品牌节", "北京电力", "中法大学", "中车门", "科沃斯", "北京三快科技有限公司", "周大福", "克莉丝汀", "国药控股药房（上海）有限公司", "和美新疆", "招商基金管理有限公司", "长沙市“小个专", "枫树路", "苏木达依列克河", "三亚", "老年人口", "京沪铁路", "快科技", "未来基金", "安徽省医院", "Gate业银行", "云南贵金属集团", "MeitMeSystems", "六旗娱乐", "中国巨力集团", "迪普科技", "江西威尔高电子股份有限公司", "正泰", "中建五局轨道交通电气化公司", "幻方", "蒙古国", "粮安天下聚合力", "晋创谷", "五粮液集团", "意大利", "无党派", "马自达e-6", "中南大学湘雅医院", "书山有麓", "ArdentHealthPart", "蒙特利尔银行", "沪宁股份", "*ST名家", "沃尔玛", "土库曼斯", "中新生态城", "广东外语外贸大学", "InnovCoeHolding", "PRiaHealthg", "SergeryPART", "南方证券上海分公司", "竹园", "镇江金山公园", "未来", "粤港澳大湾区", "郴州古色古香", "vivo", "VerActe", "SunOEn", "哈里伯顿公司", "生命农场公司", "华高公司", "纳达尔", "基金", "商务部服贸司", "扬州金奥中心", "爱玛科技", "银河证券", "中国香港", "苏美达集团", "智能矿山", "腾讯", "天中海邮轮", "瑞银", "易方达中证科创创业", "中国人民银行", "欧洲央行", "中车株洲所", "乳山市鼎呈鲜海产品加工有限公司", "摩根大通", "钻汇云", "河南中光学集团有限公司", "英伟达", "酩悦轩尼诗", "enabaseEnergy", "BallardPowerSystems", "海纳国际集团", "嘉信理财集团", "上汽通用", "健尔康", "民航", "厚傅食品", "科技保险", "巴蜀文化", "深圳控股", "严伯进", "五羊旗舰店", "埃及", "泽连斯基", "热特拜油田", "山东夸夸团", "新疆能源集团托克逊洁净环保科技有限公司", "南信德新材料有限公司", "白皮书", "中天科技", "敦煌石窟", "大连长丰实业总公司", "华为", "诺特", "嘉克杯", "软通动力", "江西屹锂新能源发展有限公司", "鼎益丰", "朝中社", "ST基金", "中泰中证", "", "莒南县投资管理有限公司", "济南房源", "老爸茶店", "华美烟花秀", "徐州同程旅行社有限公司", "友好集团", "小鹏汽车", "加加食品集团股份有限公司", "农夫山泉有限公司", "周生生", "老凤祥银泰城店", "海底捞", "黄果树景区", "盛大", "智通财经", "安顺邮局", "比亚迪", "两新", "广东夫妇", "建信易盛郑商所能源化工期货", "建信易盛能源化工期货", "永辉超市", "阿根廷锂钾有限公司", "四鹊山小米", "京东", "镇宁思源", "智源研究院", "中国高能物理研究所", "香港城市大学", "钙钛矿", "祺龙海洋", "清众科技", "SHkmob", "中心", "坎托菲茨杰拉德公司", "US）", "沙特", "广东省博物馆", "Foreverboo", "美国航空", "Bitdeerprotagonist", "小摩", "IrisEnergy", "耶伦", "VFP", "IBM国际商业机器", "奕派", "达州东部经开区", "艾伦建材", "百洁布", "铜梁金汇能", "金砖", "钱江新城", "卡莱集团", "四川水井坊股份有限公司", "成都航空", "中国石化", "明阳智慧能源集团股份公司", "华锐风电", "赣南客家", "双柏", "沈阳班", "松下", "约牛科技", "广州彩瓷", "雅加达", "康美产业园", "南通港通海港", "扬州航空航天大学可靠性与环境工程技术全国重点实验室", "德州", "鉴宝", "世超", "怀柔长城咖啡", "西达么村", "绿河大集", "猴头菇", "万特电气", "紫金矿业", "齐治科技", "中科三耐", "博达软件", "差旅技术", "北京金融街资本运营集团有限公司", "高新技术", "钱凯港", "德江县宏壶春茶业有限公司", "应进尽进", "花样滑冰", "金融强国", "阿联酋", "河北交通投资集团有限公司", "乌", "天开高教科创园", "海口旅游职业学校", "新疆建设兵团", "龙净环保", "福山区", "云南运动员", "贵州轮胎", "润贝航科", "福籽", "新崀西路", "云南运动", "二重镇江公司", "灯红酒绿", "软银", "华特磁电", "泰安老街", "鞍子", "北京同益中新材料股份有限公司", "山东港口杯", "汕头市孔凤春电子商务有限公司", "O八研究所", "希腊公司", "草原五班", "榆林市", "常宝堂", "广和通", "中亚股份", "诺贝尔", "雷鸟创新", "杭州漫村文旅投资管理有限公司", "福建制造业", "炬光科技", "福成实业(海南)有限公司", "巨丰投顾", "聚力生开阳", "坎蒂隆", "江南布衣企业", "Ser-Energy", "金锑银矿", "罗技", "Transtorrini", "任小森", "国庆假期", "法国达飞海运集团", "江西省新江洲船舶重工有限责任公司", "NorthlandCapitalMarkets", "Foline", "家里", "美团", "黄果树", "成都自然博物馆", "鸿合科技", "珠江", "商超百货", "福田国际消费周", "华阳", "enliven", "横琴民生", "AMD", "Google", "德善体育", "巢湖市", "合肥植物园", "脉速科技", "龙腾中华", "微软", "富硒蔬菜", "南苑森林湿地公园", "五星红旗", "箭牌卫浴", "浪潮通用软件有限公司", "中船）节能技术有限公司", "英搏尔", "浙江仙通", "上海冠龙阀门节能设备股份有限公司", "神洁环保", "2018年11月7日", "黎巴嫩", "神舟十九号", "花旗", "南方惠利基金", "达实智能", "阳西县", "龙华街道妇联", "大鹏旅游", "大鹏新区", "红“芯", "智慧银行", "黄河流域", "宾谷河", "广西公司", "福建省", "湖南恒晟环保科技有限公司", "南宁云小主播", "上海易居房地产研究院", "广州南沙", "Moenta", "大自然", "温雅兰兰", "马龙", "中信建投", "川渝高竹新区", "南昌铁路局", "稼轩文旅城", "金砖国家", "美国", "广东旅游", "湾区置业", "长顺教育", "马来西亚", "环球小姐", "以色列", "深圳水贝", "约谁", "押加", "高铁北广场", "新疆广汇篮球", "本基金", "哈里斯", "特斯拉", "冠石科技", "金发科技", "科达制造", "LeerinkPartners", "佩恩国民博彩", "多邻国", "国网新疆电力有限公司", "中信建投国际", "金华婺城支行", "建行江苏省淮安分行", "志愿军", "中山市翠亨新区", "华夏基金", "赣南苏区振兴", "沃华医药", "wasteConnections", "中新社", "和讯网站", "岱勒新材", "福能东方", "震裕科技", "中国工程院", "ARM", "小米汽车", "闽发铝业", "金砖国家技能发展与技术创新大赛", "西安创业水务有限公司", "广州地铁地产", "房子", "梦想之屋", "华润置地", "海南生物", "古特雷斯", "嘉兴南湖船", "西南民族大学", "江苏长江产业经济发展研究院", "中信农业科技股份有限公司", "新华联", "金山软件", "同仁们", "日本", "路德环境", "中国音数协游戏博物馆", "我省高铁", "西安城", "陕西人", "TransYNion", "LEYOsHoldingsinc", "首控集团", "能链智电", "OPEC", "花旗集团", "俄罗斯", "国家", "天图人", "大悦城", "中华民族", "龙鳞装", "天津市井", "安徽小射手", "安徽省体育博物馆", "果子", "中国三峡建工（集团）有限公司", "长城汽车", "金徽酒", "吴通控股", "富达基金（中国）公司", "格鲁吉亚", "平湖市华海造船有限公司", "金融", "怡亚通", "苹果园", "新华社快讯", "广船国际", "山东海洋集团", "布雷顿森林", "康养旅居", "海运", "液化空气集团", "阿斯麦控股", "SZvamo", "盛泽", "芝加哥大学", "北mus", "印度尼西亚", "新媒体工作室", "中关村科学城", "西藏注册"];
        const allScores = [[2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 1, 2], [1, 1, 1, 2, 1, 1], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 2, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 1, 2, 1], [1, 1, 1, 1, 1, 2], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 2], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 1, 1, 2], [1, 1, 1, 2, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 1, 3], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 1, 2], [2, 1, 1, 1, 1, 1], [3, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 1, 2, 1], [3, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [1, 1, 1, 1, 1, 2], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 1, 2], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 4, 1, 1, 1], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 1, 2], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [8, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 2], [2, 1, 1, 2, 1, 1], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 1, 2], [1, 1, 1, 2, 1, 1], [1, 1, 1, 1, 2, 1], [1, 1, 2, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [4, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 5], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [3, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 1, 2], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 3, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 2], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [1, 1, 1, 1, 2, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 4, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 2], [2, 1, 1, 1, 1, 1], [1, 2, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [3, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [3, 1, 1, 2, 2, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 1, 2], [1, 1, 1, 2, 1, 1], [1, 1, 1, 1, 2, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 1, 1, 2], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 2], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 1, 2, 1], [1, 1, 2, 1, 1, 1], [1, 1, 1, 1, 1, 9], [1, 1, 1, 1, 1, 2], [1, 1, 1, 2, 1, 1], [1, 1, 1, 1, 2, 1], [1, 1, 1, 1, 2, 1], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 1, 7], [1, 1, 1, 1, 1, 2], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 1, 2], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 2], [1, 1, 1, 2, 1, 1], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 2], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 2], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [3, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 2], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [3, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 2], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [1, 1, 1, 1, 2, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 1, 2], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 1, 2], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 2], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 3, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 2], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [3, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 2], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [1, 1, 2, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 2], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 1, 2], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 2, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [1, 2, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 1, 2, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [3, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [1, 1, 1, 1, 2, 1], [1, 1, 1, 1, 2, 1], [1, 1, 1, 1, 2, 1], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 1, 1, 2], [1, 1, 1, 2, 1, 1], [1, 1, 1, 1, 2, 1], [1, 1, 1, 1, 1, 3], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 2], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [1, 1, 1, 1, 2, 1]];

        // 分页参数
        const pageSize = 10;
        let currentPage = 1;
        const totalPages = Math.ceil(allCompanies.length / pageSize);

        function getPageData(page) {
            const start = (page - 1) * pageSize;
            const end = Math.min(start + pageSize, allCompanies.length);

            const companies = allCompanies.slice(start, end);
            const scores = allScores.slice(start, end);
            const totalScores = scores.map(s => (s.reduce((a, b) => a + b, 0) / s.length).toFixed(2));

            // 按总评分升序排序
            const sorted = companies.map((name, i) => ({
                name,
                scores: scores[i],
                total: totalScores[i]
            })).sort((a, b) => a.total - b.total);

            return {
                names: sorted.map(c => c.name),
                scores: sorted.map(c => c.scores),
                totals: sorted.map(c => c.total)
            };
        }

        function renderHeatmap(page) {
            const { names, scores, totals } = getPageData(page);
            const data = [];

            for (let i = 0; i < names.length; i++) {
                for (let j = 0; j < risks.length; j++) {
                    data.push([j, i, scores[i][j]]);
                }
                data.push([risks.length, i, parseFloat(totals[i])]);
            }

            const option = {
                title: {
                    text: '公司风险热力图',
                    left: 'center',
                    top: 10,
                    padding: [0, 0, 20, 0]
                },
                tooltip: {
                    formatter: function (params) {
                        const isTotal = params.value[0] === risks.length;
                        const company = names[params.value[1]];
                        const label = isTotal ? '总评分' : risks[params.value[0]];
                        return `${company}<br/>${label}：<strong>${params.value[2]}</strong>`;
                    }
                },
                grid: {
                    left: '10%',
                    right: '10%',
                    bottom: '15%',
                    top: '20%'
                },
                xAxis: {
                    type: 'category',
                    data: [...risks, '风险指数'],
                    position: 'top',
                    splitArea: { show: true },
                    axisLabel: {
                        interval: 0,
                        rotate: 30,
                        margin: 15
                    }
                },
                yAxis: {
                    type: 'category',
                    data: names,
                    splitArea: { show: true },
                    axisLabel: { margin: 15 }
                },
                visualMap: {
                    min: 0,
                    max: 10,
                    calculable: true,
                    orient: 'horizontal',
                    left: 'center',
                    bottom: '5%'
                },
                series: [{
                    name: '风险得分',
                    type: 'heatmap',
                    data: data,
                    label: { show: true },
                    emphasis: {
                        itemStyle: {
                            shadowBlur: 10,
                            shadowColor: 'rgba(0, 0, 0, 0.5)'
                        }
                    }
                }]
            };

            const chartDom = document.getElementById('main');
            const myChart = echarts.init(chartDom);
            myChart.setOption(option);

            document.getElementById('page-info').textContent = `第 ${currentPage} / ${totalPages} 页`;
        }

        document.getElementById('prev-page').onclick = () => {
            if (currentPage > 1) {
                currentPage--;
                renderHeatmap(currentPage);
            }
        };

        document.getElementById('next-page').onclick = () => {
            if (currentPage < totalPages) {
                currentPage++;
                renderHeatmap(currentPage);
            }
        };

        // 初始加载
        renderHeatmap(currentPage);
    </script>
</body>
</html>
