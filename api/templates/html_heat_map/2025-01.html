<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>公司风险热力图（分页）</title>
    <script src="https://cdn.jsdelivr.net/npm/echarts@5/dist/echarts.min.js"></script>
    <style>
        #main {
            width: 1000px;
            height: 600px;
            margin: 20px auto;
        }
        #pagination {
            text-align: center;
            margin-bottom: 20px;
        }
        #pagination button {
            margin: 0 5px;
            padding: 5px 10px;
            font-size: 14px;
            cursor: pointer;
        }
        #page-info {
            margin: 0 10px;
        }
    </style>
</head>
<body>
    <div id="pagination">
        <button id="prev-page">上一页</button>
        <span id="page-info"></span>
        <button id="next-page">下一页</button>
    </div>
    <div id="main"></div>

    <script>
        const risks = ['公司治理风险', '法律与合规风险', '财务与偿付风险', '信息披露风险', '经营稳定风险', '声誉与外部评级风险'];

        // 模拟 30 家公司
        const allCompanies = ["海南家美乐康养产业集团有限公司", "前线海运Foline", "中船澄西船舶修造有限公司", "长沙机场", "冬奥遗产", "美宜佳", "江苏永成", "塞尔维亚", "信托", "金麒麟", "郑州日产汽车有限公司", "伊宁市第十九中学", "新疆生产建设兵团", "vivo", "贾鲁河", "", "郁斐", "伟业", "宾利", "华为", "托养中心", "天马科技", "刚果", "长沙安牧泉智能科技有限公司", "##yEnergy", "迈威尔科技公司", "STculesl", "普通蛇钞", "普利制药", "济宁甲醇", "美国", "天合光能", "重庆水务", "雷鸟光学", "芯科实验室", "IMunityBio", "极越汽车", "头菜加工作坊", "星辰在线", "金地商置", "万达广场", "未来", "湖北交投鄂西北运营公司", "义乌", "龙舞丰年", "新华社", "特斯拉", "中车四方机车公园", "云南省长寿康养旅居", "浙商证券", "哈西站", "横琴粤澳深度合作区", "新华社发", "虎门历史文化旅游区", "乐趣", "招银金租", "苏美达", "ASP", "达飞", "好运连连", "Steam", "广发银行", "英伟达", "重庆交通大学", "南京航空航天大学", "蔚来汽车", "周大福", "中国黄金集团黄金珠宝股份有限公司", "金利来集团", "象甲联赛", "淮北矿业", "TCL", "中新网", "安踏", "力量钻石", "日月湖片区", "商丘", "商丘安踏鞋业", "榆林小吃", "名古屋", "爱婴室", "华金证券", "沃尔兰油田", "天津向“新）而行", "天津美术学院", "天津交响乐团", "中新友好使者", "滨州市委员会", "拼多多", "苹果", "瓜子花生", "广西精品年货节", "恒力重工", "上海振华重工", "江龙船艇", "电建海工", "字节跳动", "理工农医", "北京是卓科技有限公司", "哈尔滨工业大学（深圳）材料科学与工程学院", "德国德累斯顿-罗森多夫赫尔姆霍兹中心资源生态研究所", "江门中微子实验探测器", "四川新篇章", "拼建设", "凯雷姆沙洛姆", "成都市虚拟电厂", "山西蓝焰煤层气集团有限责任公司勘探分公司", "魅族科技", "阿里", "广州", "##P#dler", "HealthcareRealtyStrat", "careritustRe", "武汉海特生物制药股份有限公司", "西安中熔电气股份有限公司", "山东三元生物科技股份有限公司", "中信银行", "腾讯", "ST恒宇", "苏宁易购", "高鑫零售", "天津锐新昌科技股份有限公司", "海优宁维生物科技股份有限公司", "北京深化国家服务业", "玛丽亚", "俄气", "科蒂", "中信建投", "碧桂园", "金砖", "广东省公安专业", "长沙岳麓山索道", "极氪", "五羊本田", "福建", "四川新闻网传媒（集团）股份有限公司", "玉出昆冈", "迪安诊断", "##boo", "未来电视台", "来伊份", "安顺古城", "顾得新材料（江西）有限公司", "厦门国盈投资有限公司", "建湖遇鲜食品有限公司", "江西一勺乡愁科技有限公司", "瑞莱生物科技（镇江）有限公司", "江苏联俊联怡有色金属制造有限公司", "盐城新宝磊金属进出口有限公司", "选举", "茶精彩连连", "奥林匹克", "拳皇", "塔塔钢铁公司", "OPPO", "临泉芥菜", "屯堡文化", "金汤社区", "辽宁队", "中集集团", "山东农业科技有限公司", "中国力量", "五芳斋", "长荣海运", "三点水新能源科技（安徽）有限公司", "华滋能源", "阳明海运", "蜜雪冰城", "山西博物院", "泡泡玛特", "新发地", "猫眼", "四川省", "草根知本", "特朗普", "中海航运", "江门航通船业", "澳龙船艇", "冰区航行", "虹山湖", "金阡三个县", "融创中国控股有限公司", "江苏", "四川市场", "深圳市光明区", "福建德尔科技股份有限公司", "财富管理", "酒鬼酒", "amerantBacorp", "cesius", "杰富瑞投资银行", "XPO", "信用卡贷款", "环球物流控股", "法律服务志愿者", "天府旅游美食", "帝人芳纶", "博动", "景德镇", "好想你", "福建省", "青岛中资中程集团股份有限公司", "中航电测仪器股份有限公司", "美国银行", "福州市水路运输事业发展中心", "省委", "云南人大", "智界", "埃森哲", "浪潮思科网络科技有限公司", "渝农商金融租赁有限责任公司", "渝农商行", "乐阳网讯", "庆阳网讯", "CoinP", "拜登", "贵州高康", "南方和元C", "绵阳人工智能学院", "三星堆", "岷江航运", "瑞大家", "上海虹桥站", "华安", "京通小程序", "东莞市羽博通讯设备有限公司", "霍尔果斯金亿国际贸易（集团）有限公司", "上海极光湾汽车", "Ulta美妆公司", "沃尔玛", "摩根大通证券公司", "富国银行", "江森自控国际有限公司", "bayerHelHealth", "广东志愿服务", "美国白宫国家禁毒政策办公室", "小米集团", "抖音电商", "亚马逊", "广州东站东方宝泰", "滨州市供销社", "中新社", "海归小镇", "洞天福地", "山东重工集团", "天府中央商务区", "北极星", "Uberno", "财达证券", "京东方", "格力电器", "eBay", "Woodward", "阜阳悦行领克中心", "Mea公司", "MeaPLAsinc", "福耀科大", "振东国际生物制药有限公司", "丰田汽车", "北斗模块", "云南省城市建设投资集团有限公司", "华声在线", "宣昌能", "taosEnergy", "余慈高速", "瀚远科技", "湖南省新华书店", "MG", "豫资控股", "智能手表", "StratHub", "蛇年", "九江石化", "世赛冠军", "广东艺术职业学院", "虹膜", "阿曼Lazail铜矿", "塔吉克斯", "三星医疗", "奔驰", "中国储备粮管理集团有限公司", "万科", "北京市朝阳区邮票公司", "投行", "霸王茶姬", "爱琴海", "福纳百祥", "首旅集团", "山东金茂碱厂", "顺风车", "星期五", "山东道恩高分子材料股份有限公司", "华山公司", "广发证券股份有限公司", "江苏正威新材料股份有限公司", "长缆科技", "优酷", "镇宁民族中学", "小米汽车", "龙华", "南京紫金投资集团有限责任公司", "山西恒锦盛科技有限公司", "鞍山市", "鸿蒙智行", "上4休3", "大唐推演新历", "恒顺醋业", "阿联酋", "云南电信", "达州东部经开区", "通川—顺庆政协", "广汽丰田", "江苏华韧热电有限公司", "厦门市海二科园科技发展有限公司", "苏州吴都泽望新能源有限公司", "泰州扬泰科技贸易有限公司", "中创能化工程技术研究院（厦门）有限公司", "苏州瀚泽和发置地有限公司", "上海众裕实业发展有限公司", "盐城市大丰区园景农业发展有限公司", "盐城沐昱新材料有限公司", "佰控科技（南通）有限公司", "中科纳米材料科技（盐城）有限公司", "金蛇迎春", "鹿山新材", "龙头股份", "瀚凯斯", "惠民县清河镇", "闽南大戏院", "扬州青商产业协同科创中心", "湖北宜昌开工建设", "康隆达", "银川市", "新潮传媒", "br东圃镇站", "上海临床创新转化研究院", "晋能控股潞阳李阳煤业", "吉林长白山人参", "龙泉股份", "南通中远海运川崎技术本部", "摩根大通", "眉山水利", "甘州融媒", "伊克力西斯", "Vericel", "法医学", "asureSoftware", "小红书", "TEU", "万龙", "民士达", "智利", "江苏新海连能源有限公司", "苏州三达交创新材料有限公司", "江苏焕华纤维科技有限公司", "江苏交能新能源有限公司", "俄罗斯天然气", "福田达夫", "光可调透镜", "asriaTherapeuticsinc", "Intra-Cellulartherapies", "阿尔法泰克", "商络电子", "嘉麟杰", "吉林工程技术师范学院乡村振兴研究院", "亿达中国控股有限公司", "广东魅力街镇研究院", "汇通银行", "信泰保险", "地奥心血康", "成都海底捞", "德国", "佰仁医疗", "民生", "金沙集团", "黎巴嫩", "吉利", "宏富产业", "招商基金管理有限公司", "广元经济技术开发区", "古蔺县委", "德阳", "青城双姝", "马村镇", "中英", "腾波", "全红婵", "北约", "中国三峡新能源公司河北分公司", "中国人民银行", "万科A公司", "登记代理（江苏）有限公司", "深圳市华智创新产业园运营有限公司", "深圳垂直起降飞行器创新中心有限公司", "阜宁县阜民健康咨询服务有限公司", "江苏禄特斯电力科技有限公司", "苏州苏易行科技有限公司", "徐州物源置业有限公司", "昆山浦坪置业有限公司", "缅甸", "德州公路酒吧", "快科技", "esentgroup", "FirstAmericanFinancial", "EnactHoldinc", "高文明", "中国", "smart精灵", "海南自贸港", "南屏步行街", "珠江水系", "海珠区", "2018年分公司", "ST宇顺", "山东能源集团", "锂云母", "华西眉山物流中心", "帕姆·邦迪", "铜仁市", "大众朗逸", "Coinbase", "铜基新材料集群", "春节", "中国电视剧", "法航", "幻方量化", "酒言欢", "AosFinancial", "##proP", "安顺", "匹诺曹", "加拿大央行", "珠海非遗资源", "拜合拉木", "千灯启明", "OPEn#", "中国黄金集团", "东莞乳圆智能科技", "广东", "巴克莱", "捷途纵横", "快子路", "知音湖北", "百强县", "苹果公司", "ST熊猫", "特鲁多", "金蛇", "坎托菲茨杰拉德公司", "维勒鲁瓦", "Capital", "江西中科微点信息技术有限公司", "厦门国合嘉创科技有限责任公司", "厦门贸屿房地产开发有限公司", "广油乘用车", "新能源", "新能源乘用车", "骏龙武术俱乐部", "万华化学集团股份有限公司", "住遂", "遂宁代表团", "新疆煤田", "&#", "四川在线", "申通快递", "重庆市书画研究会", "海瑞", "小米", "鹏飞集团", "中航沈飞", "辉瑞", "德国商业银行", "四川省第十三届委员会", "川剧展演", "高盛", "沈马斯", "水运", "集泰股份", "三六五网", "楚科信息公司客服维保分公司", "泰安娜", "朗威股份", "华瓷股份", "宇瞳光学", "迈巴赫", "美的集团", "醒狮", "江南文商旅融合圈", "波斯菊花海", "花都区", "赛恩斯", "Interusctiongroup", "伊萨", "容知日新", "奥迪", "直播电商", "玉溪小镇"];
        const allScores = [[2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [1, 1, 1, 1, 1, 2], [1, 1, 1, 2, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [3, 1, 2, 1, 1, 2], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [3, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [3, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 1, 2], [1, 1, 1, 2, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [4, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 2], [1, 1, 1, 2, 1, 1], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [6, 1, 1, 2, 2, 1], [1, 1, 1, 1, 2, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [3, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [1, 1, 1, 3, 1, 1], [3, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 1, 2], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 2], [1, 1, 1, 1, 2, 1], [3, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 2, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 1, 2, 1], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 1, 2], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [3, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [1, 1, 1, 2, 1, 1], [3, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 3, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 1, 1, 2], [1, 1, 1, 2, 1, 1], [1, 1, 1, 1, 1, 2], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 3, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 2], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [3, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [1, 1, 2, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 1, 2], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [1, 1, 2, 1, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 2, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 2, 1, 1], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 1, 2], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [3, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [3, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 1, 3], [1, 1, 1, 1, 1, 7], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 1, 2], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 2], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 1, 2, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 1, 1, 2], [5, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 1, 2], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 1, 2], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 1, 1, 2], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 2], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 1, 2, 1], [1, 1, 1, 1, 2, 1], [1, 1, 1, 1, 2, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 3], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 1, 2, 1], [1, 1, 1, 1, 2, 1], [1, 1, 1, 1, 1, 2], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [3, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [3, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [3, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [3, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 1, 2], [2, 1, 1, 1, 2, 1], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 1, 2], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 2], [1, 1, 2, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 2], [1, 1, 1, 2, 1, 1], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 1, 2], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 2], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [1, 1, 1, 1, 2, 1], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 1, 1, 2], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 1, 1, 2], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 2], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 2], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [1, 1, 1, 1, 2, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 1, 2, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 1, 2], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1]];

        // 分页参数
        const pageSize = 10;
        let currentPage = 1;
        const totalPages = Math.ceil(allCompanies.length / pageSize);

        function getPageData(page) {
            const start = (page - 1) * pageSize;
            const end = Math.min(start + pageSize, allCompanies.length);

            const companies = allCompanies.slice(start, end);
            const scores = allScores.slice(start, end);
            const totalScores = scores.map(s => (s.reduce((a, b) => a + b, 0) / s.length).toFixed(2));

            // 按总评分升序排序
            const sorted = companies.map((name, i) => ({
                name,
                scores: scores[i],
                total: totalScores[i]
            })).sort((a, b) => a.total - b.total);

            return {
                names: sorted.map(c => c.name),
                scores: sorted.map(c => c.scores),
                totals: sorted.map(c => c.total)
            };
        }

        function renderHeatmap(page) {
            const { names, scores, totals } = getPageData(page);
            const data = [];

            for (let i = 0; i < names.length; i++) {
                for (let j = 0; j < risks.length; j++) {
                    data.push([j, i, scores[i][j]]);
                }
                data.push([risks.length, i, parseFloat(totals[i])]);
            }

            const option = {
                title: {
                    text: '公司风险热力图',
                    left: 'center',
                    top: 10,
                    padding: [0, 0, 20, 0]
                },
                tooltip: {
                    formatter: function (params) {
                        const isTotal = params.value[0] === risks.length;
                        const company = names[params.value[1]];
                        const label = isTotal ? '总评分' : risks[params.value[0]];
                        return `${company}<br/>${label}：<strong>${params.value[2]}</strong>`;
                    }
                },
                grid: {
                    left: '10%',
                    right: '10%',
                    bottom: '15%',
                    top: '20%'
                },
                xAxis: {
                    type: 'category',
                    data: [...risks, '风险指数'],
                    position: 'top',
                    splitArea: { show: true },
                    axisLabel: {
                        interval: 0,
                        rotate: 30,
                        margin: 15
                    }
                },
                yAxis: {
                    type: 'category',
                    data: names,
                    splitArea: { show: true },
                    axisLabel: { margin: 15 }
                },
                visualMap: {
                    min: 0,
                    max: 10,
                    calculable: true,
                    orient: 'horizontal',
                    left: 'center',
                    bottom: '5%'
                },
                series: [{
                    name: '风险得分',
                    type: 'heatmap',
                    data: data,
                    label: { show: true },
                    emphasis: {
                        itemStyle: {
                            shadowBlur: 10,
                            shadowColor: 'rgba(0, 0, 0, 0.5)'
                        }
                    }
                }]
            };

            const chartDom = document.getElementById('main');
            const myChart = echarts.init(chartDom);
            myChart.setOption(option);

            document.getElementById('page-info').textContent = `第 ${currentPage} / ${totalPages} 页`;
        }

        document.getElementById('prev-page').onclick = () => {
            if (currentPage > 1) {
                currentPage--;
                renderHeatmap(currentPage);
            }
        };

        document.getElementById('next-page').onclick = () => {
            if (currentPage < totalPages) {
                currentPage++;
                renderHeatmap(currentPage);
            }
        };

        // 初始加载
        renderHeatmap(currentPage);
    </script>
</body>
</html>
