<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>公司风险热力图（分页）</title>
    <script src="https://cdn.jsdelivr.net/npm/echarts@5/dist/echarts.min.js"></script>
    <style>
        #main {
            width: 1000px;
            height: 600px;
            margin: 20px auto;
        }
        #pagination {
            text-align: center;
            margin-bottom: 20px;
        }
        #pagination button {
            margin: 0 5px;
            padding: 5px 10px;
            font-size: 14px;
            cursor: pointer;
        }
        #page-info {
            margin: 0 10px;
        }
    </style>
</head>
<body>
    <div id="pagination">
        <button id="prev-page">上一页</button>
        <span id="page-info"></span>
        <button id="next-page">下一页</button>
    </div>
    <div id="main"></div>

    <script>
        const risks = ['公司治理风险', '法律与合规风险', '财务与偿付风险', '信息披露风险', '经营稳定风险', '声誉与外部评级风险'];

        // 模拟 30 家公司
        const allCompanies = ["民治街道", "东门步行街研学实践基地", "罗湖区", "朴朴网络科技", "新桥街道", "3·15国际消费者权益日", "小米集团", "小米", "湖北恒环环保科技有限公司", "湖北恒森门业有限公司", "兴业证券", "格力电器", "格力", "湖北念一金属制品有限公司", "委内瑞拉", "长庆油田采气二厂", "中国电信重庆公司", "吉林", "何健麒", "艾可萨科技", "长和", "温德姆酒店", "奥本海默", "希尔顿全球控股有限公司", "宁德时代", "康达新材", "罗湖", "南都新闻", "华为", "瑞穗银行", "大摩", "音乐动感", "旅居云南", "成都大运会", "Espergyon", "四川代表团", "中新网", "金程源", "广东鸿图科技股份有限公司", "中国水运网", "TCL科技", "保时捷", "吉利", "金洲管道", "美国信息", "洽洽食品", "微芯科技", "上海凯兴泰新材料有限公司", "上海锦雅自动化设备有限公司", "上海胜岳自动化设备有限公司", "新兴", "起亚", "千里科技", "国家能源集团", "东方集团", "江南布衣", "中国残疾人艺术团", "极星科技", "东风越野车有限公司", "宇通集团", "汇丰", "河北辰治汽车零部件科技有限公司", "北博可耐特汽车零部件有限公司", "唐山维真科技有限公司", "定州新纶环保设备有限公司", "福州经济技术开发区", "滨江集团", "四川工程", "京津中关村科技城", "福州古城", "石鼓文", "诚邦生态环境股份有限公司", "浙江黎明智造股份有限公司", "天津渤海银行", "浙江大学医学院附属第二医院", "InvergyHomes", "ExtraSpaceSTorage", "##yCapital", "Da", "亚瑟加拉格尔", "SpaceMshore", "皇家加勒比集团", "FometEntertainment", "十四届全国人大", "厦门港务发展股份有限公司", "景旺电子", "辽宁", "英华特泰国", "和元生物技术（上海）股份有限公司", "基金", "鹏华中证高铁产业", "静为律所", "英伟达", "追觅科技", "广汽集团", "宝马集团", "索尼", "广东醒狮", "中材科技", "广州酒家集团股份有限公司", "美国国防部", "美联储", "麒麟", "西门子", "瑞芯微", "喀土穆银行", "苏丹", "尼旅游", "机会发展特区", "烟台金润核电材料股份有限公司", "汉宇集团", "兴通股份", "湖南文昌新材科技股份有限公司", "山东华鹏精机股份有限公司", "新疆众和", "凯恩股份", "习酒集团", "成都人", "中新社", "2017年国际滑联短道速滑世锦赛", "天山网", "广西崇左市扶绥县市场监督管理局", "茂名市", "茂名市人民检察院", "茂名", "三星商家", "丰泽区", "啄木鸟", "健芝初医疗器械有限公司", "网红", "宝钢集团", "贵港贵港", "深汕特别合作区", "天空地海", "邮储银行", "区分", "中国邮政储蓄银行股份有限公司", "新甘肃", "中手游", "潜江", "招商引资", "福特汽车公司", "建设银行", "Gas)", "YiHubManagementSystem", "混联式", "霍尼韦尔", "中新网站", "大乐之野", "福建省", "高凌军", "沈阳", "本所", "大家", "敦煌种业", "阿联酋", "美晨科技", "凯利・洛夫勒", "英联邦", "科陆电子", "极氪", "雷丁汽车", "腾势汽车", "宝马", "Beyond2", "易方达基金", "紫金矿业", "中集环科", "新铝时代", "安孚科技", "荣耀", "智能家居", "比亚迪", "零壹智库", "福田时尚", "金才玖", "财阀城市发展有限公司", "卡通动物", "盛世古董", "华能新疆公司", "畅通信托", "圣淘沙", "苹果", "北电数智", "天马行空", "Intel", "瑞波币", "全运会", "秦L", "红旗e-H9", "百县千镇", "未来咖啡", "信测标准", "泗县总工会", "皖工", "健康美食", "胜利油田", "三博脑科", "千禾味业", "有友食品", "奥迪", "特朗普", "首都医科大学", "##nelux", "尼日利亚", "稷", "轩田科技", "VF80", "毛葆庆音乐文化基金会", "##ssabas", "Boltotherapeutics", "重庆市", "倍杰特", "字节跳动", "泽连斯基", "博鳌亚洲论坛", "大连中远海运有限公司", "克里姆林", "盘龙区联社", "日本央行", "小米汽车", "江西农商银行", "中加基金", "淄博大亚金属科技股份有限公司", "铜仁市", "铜仁市第三届人民代表大会", "铜仁市第三届人民代表大会常务委员会", "#&#", "问界", "奔驰中国", "中展集团", "第一资本金融公司", "利安德巴塞尔工业公司", "小米SU7Ultra", "德州公路酒吧", "VeraTherapeutics", "tOgroupHoldings", "北京W王者荣耀分部", "烟台机场", "伏羲庙", "未来", "重庆市城市治理研究院", "迪士尼", "沈阳市", "运-9", "志邦家居", "洛阳奥图机械设备有限公司", "运达股份", "浙江菲达精工机械有限公司", "泛美航空科技（南京）有限公司", "广西云-广西代表团", "仰望u7", "三堆书", "澳大利亚", "神华新街能源有限公司", "云发煤矿", "微软", "库尔斯克州", "默茨", "雪榕生物", "贺利氏光伏（上海）有限公司", "海思科", "广东省政府", "瑞银", "2018年11日", "薯片", "特斯拉", "芬太尼", "北京市促进国四", "胖五斤", "斯特兰蒂斯集团", "长园集团", "郴州启程自驾游俱乐部", "福克斯", "智元机器人", "长庆油田第三采油厂", "途昂Pro", "老美", "五道口江湖", "广东省", "广东", "萨摩耶云科技集团", "金点子", "水果玉米", "深圳街超", "南繁硅谷", "王台书市", "力拓集团", "小小河湖卫士", "地球青松YE", "天津市青年京剧团", "中国盛泰（Sunrit）集团", "布雷顿", "波黑塞族共和国", "波黑", "名创优品集团", "新能源汽车", "联想", "善商控股", "新疆奶茶", "洛浦县民乐地毯进出口有限公司", "新疆女篮", "广百股份", "国企", "蜜雪集团", "古茗", "智汇云舟", "贸泽电子", "雅里数科", "雷尔伟", "索菲亚", "福田区", "卡尼", "嘉能可", "江苏", "小鹏汽车", "中国联通", "厦门标准砂", "国际奥委会", "中国黄金集团有限公司", "孚日股份", "柳工", "丹江口市", "意大利", "融通基金", "极氪科技", "东方金诚", "路透社", "波罗申科", "瑞讯银行", "中老铁路", "莱斯康制药有限公司", "海纳国际集团", "小摩", "##rikuTechfinance", "星快船公司", "华漕", "高校", "河南太和文旅集团", "腾讯", "江苏省血液中心", "红色星球", "智能", "金山银山", "博鳌亚洲会", "乌军", "新生态", "白云镇平元村", "美国之音电台", "特鲁多", "雅典", "福特", "爱奇艺", "刚果矿场", "零跑汽车", "土中友好基金会", "工商银行", "马尾造船公司", "千江高新", "国泰君安证券", "安宁股份", "农业推广硕士", "日照金山", "深业集团", "深圳广播电影电视集团", "海峡股份", "天擎公司", "深圳市广电网络有限公司", "育碧", "绵阳市委", "成都市电影公司", "藏格矿业", "浪潮信息", "中铝国际", "北京", "江阴市恒润重工股份有限公司", "广西", "广西创新", "柳州市宸泰机械有限责任公司", "中原高速", "中恒集团", "航天智装", "中创新航", "STculesshore", "Wallbox", "加拿大蒙特利尔银行", "中药", "美国太空探索技术公司", "鲁比奥", "红托竹荪", "新疆工艺美术大师", "汇顶科技", "格林基金", "华安基金", "CHgeP公司", "嘉实基金管理有限公司", "华亭市产投集团黎明川省级现代农业产业园", "红十字会", "奥莱利汽车股份有限公司", "Wayfair", "猫途鹰", "德国绿党", "广发银行股份有限公司", "上海港", "理想汽车", "一汽-大众", "中国信息协会", "启德体育园", "保利发展", "小鹏机器人", "云南拓源新能源有限公司", "蚂蚁集团", "高水平科技", "北方国际合作股份有限公司", "北方国际", "游族网络", "海天股份", "中路股份", "浙江省海港集团", "美国", "京津中", "莽山", "郴州磐石电子有限公司", "金属探测", "中微半导体设备（四川）有限公司", "双良节能", "德州）医药科技股份有限公司", "兴化股份", "安徽建工", "银泰百货", "波段", "大众汽车", "ST交投", "汇绿生态", "电投产融", "楚天科技", "湖南湘江新区", "上海湘商", "斯柯达", "长城基金管理有限公司", "金沙街沙顶社区", "波士顿咨询集团", "花花", "彭博电视", "中华人民共和国", "习近平", "民进", "江苏神通", "皇台酒业", "天安门", "零跑C16", "南京安居集团颐和历保公司", "西至凤游寺路", "吴中好物", "苏宁易购无锡苏宁广场店", "广汽本田", "BP", "古铁雷斯", "星星", "无锡市长渚", "芯笙半导体科技(上海)有限公司", "悦芯科技股份有限公司", "平安银行", "永辉超市", "尼龙6", "智通财经", "CheckPoint软件科技有限公司", "阿拉", "Switch2", "江苏省演艺集团", "智能算法生成", "深圳魏桥新能源船舶有限公司", "厦门金砖麦养元食品创新研究院有限公司", "厦门市积木饮品有限公司", "中国金茂", "太阳能", "泰安市"];
        const allScores = [[2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [3, 1, 1, 1, 1, 1], [5, 1, 1, 6, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 2, 1, 1, 1], [1, 1, 1, 1, 2, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 1, 3], [1, 1, 1, 1, 1, 2], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [9, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 1, 2], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 2], [2, 1, 1, 1, 1, 1], [5, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 2, 2, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 1, 2, 1], [1, 1, 1, 1, 2, 1], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 2], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 1, 2], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 2, 1, 1, 1], [1, 1, 2, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 2, 1, 1, 1], [2, 1, 1, 1, 1, 1], [3, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 1, 2, 2], [1, 1, 1, 1, 2, 1], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [3, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [3, 1, 1, 2, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 1, 2, 1], [1, 1, 1, 2, 1, 1], [3, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 2], [1, 1, 1, 3, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 1, 2, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [3, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [3, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 2], [1, 1, 1, 2, 1, 1], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 2, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [3, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 2], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 2, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 2], [2, 1, 1, 1, 1, 1], [2, 1, 1, 4, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 2, 1], [4, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [1, 1, 1, 1, 1, 2], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 2, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [5, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [3, 1, 1, 1, 1, 1], [3, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [4, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 2, 1], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [4, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 3, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 1, 2, 1], [1, 1, 1, 1, 2, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 2, 3, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 2, 1], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 2], [1, 1, 1, 1, 2, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 1, 1, 2], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 1, 2], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 2], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 1, 1, 2], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 2], [1, 1, 1, 2, 1, 1], [2, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 2], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 2, 1, 1, 1], [1, 1, 1, 1, 2, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 1, 2, 1], [3, 1, 1, 1, 1, 2], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 2, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [3, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 2, 1], [1, 1, 1, 1, 1, 2], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 2], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 1, 2], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [3, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [3, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [1, 1, 2, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [3, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 1, 2, 1], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 2, 1], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 2], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1]];

        // 分页参数
        const pageSize = 10;
        let currentPage = 1;
        const totalPages = Math.ceil(allCompanies.length / pageSize);

        function getPageData(page) {
            const start = (page - 1) * pageSize;
            const end = Math.min(start + pageSize, allCompanies.length);

            const companies = allCompanies.slice(start, end);
            const scores = allScores.slice(start, end);
            const totalScores = scores.map(s => (s.reduce((a, b) => a + b, 0) / s.length).toFixed(2));

            // 按总评分升序排序
            const sorted = companies.map((name, i) => ({
                name,
                scores: scores[i],
                total: totalScores[i]
            })).sort((a, b) => a.total - b.total);

            return {
                names: sorted.map(c => c.name),
                scores: sorted.map(c => c.scores),
                totals: sorted.map(c => c.total)
            };
        }

        function renderHeatmap(page) {
            const { names, scores, totals } = getPageData(page);
            const data = [];

            for (let i = 0; i < names.length; i++) {
                for (let j = 0; j < risks.length; j++) {
                    data.push([j, i, scores[i][j]]);
                }
                data.push([risks.length, i, parseFloat(totals[i])]);
            }

            const option = {
                title: {
                    text: '公司风险热力图',
                    left: 'center',
                    top: 10,
                    padding: [0, 0, 20, 0]
                },
                tooltip: {
                    formatter: function (params) {
                        const isTotal = params.value[0] === risks.length;
                        const company = names[params.value[1]];
                        const label = isTotal ? '总评分' : risks[params.value[0]];
                        return `${company}<br/>${label}：<strong>${params.value[2]}</strong>`;
                    }
                },
                grid: {
                    left: '10%',
                    right: '10%',
                    bottom: '15%',
                    top: '20%'
                },
                xAxis: {
                    type: 'category',
                    data: [...risks, '风险指数'],
                    position: 'top',
                    splitArea: { show: true },
                    axisLabel: {
                        interval: 0,
                        rotate: 30,
                        margin: 15
                    }
                },
                yAxis: {
                    type: 'category',
                    data: names,
                    splitArea: { show: true },
                    axisLabel: { margin: 15 }
                },
                visualMap: {
                    min: 0,
                    max: 10,
                    calculable: true,
                    orient: 'horizontal',
                    left: 'center',
                    bottom: '5%'
                },
                series: [{
                    name: '风险得分',
                    type: 'heatmap',
                    data: data,
                    label: { show: true },
                    emphasis: {
                        itemStyle: {
                            shadowBlur: 10,
                            shadowColor: 'rgba(0, 0, 0, 0.5)'
                        }
                    }
                }]
            };

            const chartDom = document.getElementById('main');
            const myChart = echarts.init(chartDom);
            myChart.setOption(option);

            document.getElementById('page-info').textContent = `第 ${currentPage} / ${totalPages} 页`;
        }

        document.getElementById('prev-page').onclick = () => {
            if (currentPage > 1) {
                currentPage--;
                renderHeatmap(currentPage);
            }
        };

        document.getElementById('next-page').onclick = () => {
            if (currentPage < totalPages) {
                currentPage++;
                renderHeatmap(currentPage);
            }
        };

        // 初始加载
        renderHeatmap(currentPage);
    </script>
</body>
</html>
