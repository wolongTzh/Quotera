<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>公司风险热力图（分页）</title>
    <script src="https://cdn.jsdelivr.net/npm/echarts@5/dist/echarts.min.js"></script>
    <style>
        #main {
            width: 1000px;
            height: 600px;
            margin: 20px auto;
        }
        #pagination {
            text-align: center;
            margin-bottom: 20px;
        }
        #pagination button {
            margin: 0 5px;
            padding: 5px 10px;
            font-size: 14px;
            cursor: pointer;
        }
        #page-info {
            margin: 0 10px;
        }
    </style>
</head>
<body>
    <div id="pagination">
        <button id="prev-page">上一页</button>
        <span id="page-info"></span>
        <button id="next-page">下一页</button>
    </div>
    <div id="main"></div>

    <script>
        const risks = ['公司治理风险', '法律与合规风险', '财务与偿付风险', '信息披露风险', '经营稳定风险', '声誉与外部评级风险'];

        // 模拟 30 家公司
        const allCompanies = ["约旦扎尔卡", "海底捞", "世界金属", "HerculesCapital", "洽洽食品", "南京银行股份有限公司", "泽连斯基", "潇湘电影集团", "长盛轴承", "巴西矿产", "五星", "俄军", "巴西淡水河谷", "胡金秋", "TCL", "中国银行股份有限公司", "字节跳动", "TCL动态", "亚德诺(Adiku.US)公司", "网易", "哪吒", "珠海", "重农兴农富农", "", "Netflix", "美联储", "海尔集团", "人工智能", "康菲石油", "唐山", "安徽港航集团", "江海联运", "江西省水利投资集团有限公司", "招金集团", "中新社", "同享科技", "天宏锂电", "克莱特", "福特", "零跑汽车有限公司金东分公司", "歌尔光学", "泰国", "泰警", "宜家商场", "贵州茅台", "坎托菲茨杰拉德公司", "利安德巴塞尔工业公司", "坎托菲茨", "格林美", "纽约联储", "航天", "小米", "湖北协进半导体科技有限公司", "苹果", "酒后", "武汉港", "深圳晶泰科技有限公司", "红塔红土长益定开债A", "盐津铺子", "比亚迪", "MoO", "宝地矿业", "快科技", "桂冠电力", "中铁装备集团", "利雅得", "必得科技", "吉布", "全发农业", "喀麦隆", "迪奥普", "塔", "杜尚别国际机场", "通威股份", "瑞金医院", "俄乌", "长寿花食品", "成都京东方光电科技有限公司", "百度", "港珠澳", "爱奇艺", "becden", "元宵", "荣耀", "深圳市洲明科技股份有限公司", "六小龙", "长江通航", "韩国", "华夏创业板", "PowerEnsPro2", "饿了么", "申合达实业有限公司", "上海汉理通达供应链有限公司", "上海产嵘智能科技有限公司", "金山海事局", "十堰市人民公园", "汇丰控股", "渝开发", "长虹华意", "汕头临港经济区", "国光股份", "新疆策勒县", "宿迁市柏尊生物工程有限公司", "江苏保上润达商贸有限公司", "连云港市金融控股集团有限公司", "南京力骏智能科技有限公司", "盐城市都市康旅运营管理有限公司", "拜城县众泰煤焦化有限公司", "宝山区", "RedM斯公司", "CapitalMarkets", "天津泰达建设集团", "天津利顺德大饭店", "三农", "深圳客", "民生", "长沙高中", "新疆际云染织科技有限公司", "高标准", "赛博朋克", "格力", "三姆啤酒", "SeaportGlobal", "哈利法塔", "瑞银", "kelemgDrPepper", "大摩", "视觉中国", "华硕", "小米公司", "热门手游", "Deep#k", "福建省", "法治护航", "铜仁市", "长城汽车", "波音公司", "瑞宝通达（深圳）科技有限公司", "景洋创新资本投资（深圳）有限公司", "江苏宝利国际投资股份有限公司", "宝利国际", "玩美", "AmericanHomes4Ret", "凯撒娱乐公司", "BoisescadeCo", "Wbash国立", "杭州宇树科技有限公司", "乌克兰", "市三届人大", "金瑞新材", "保管", "上海证", "三元", "保险公司", "绝味食品股份有限公司", "DaDavidson", "Fresh#", "solarisEnergy", "AlignmentHealthcare", "重庆千里科技股份有限公司", "天士力", "天士力医药集团股份有限公司", "特斯拉", "融创", "广州长隆", "古巴", "广州地铁", "常德市国土空间", "山东航空", "斯塔默", "福备箕畴", "大马士革", "英德", "侨都咖啡", "华储网", "大众安徽", "唐河元宵节", "保时捷", "龙光", "明尼阿波利斯联储", "美国巨影电影公司", "巴西", "雷诺兹", "斯", "武侠小说", "安仁古镇", "智界", "泉州非遗馆", "祥瑞舞狮", "法国", "铜梁龙舞火龙", "雷洞坪车站", "马云", "加拿大", "兰博基尼", "金饰", "华为", "长春市", "春门锦绣", "蔚来汽车", "诸暨", "蓝景丽家", "智能出菇房", "OPPO", "春运", "新疆昆玉钢铁有限公司", "未来", "松下", "漠河市净界食品科技有限责任公司", "合庆老集", "华体赛事(北京)体育管理有限公司", "中国铁路成都局集团有限公司", "惠州东方航空公司浙江分公司", "中国奥运", "摩根大通证券公司", "USFoods", "金佛山冰雪运动体验课", "腾讯", "日产", "微软", "重庆市供销合作社", "施罗德基金管理（中国）有限公司", "哪吒2", "靖远县北滩镇", "中孚实业", "中铁二十二局", "洋山深水港", "中吉乌铁路", "蜜雪冰城", "海淀", "##xi价", "云南绿算新能源有限公司", "传祺", "波特兰通用电气", "可口可乐欧洲太平洋", "通用汽车", "铁山有限公司", "艾昆纬", "金克地产公司", "利西亚车行", "StratumSCape", "中山交通", "湖北省演艺集团", "建功", "任天堂", "博时富悦纯债A", "柳钢集团", "沃尔华", "上海国际航运中心", "天津港集团", "夏雨荷", "蛇夫座", "美团", "湖南特力液压有限公司", "函谷", "福鹿", "国能成都金堂发电有限公司", "湖南响箭重工科技股份有限公司", "丰田北美", "长安常乐", "法国政府", "贝鲁", "春节档", "中兴网", "江苏新韩通船舶重工有限公司", "国泰航空", "贝法易集团", "雅化锂业（雅安）有限公司", "春风行动", "颖通控股有限公司", "福士水晶连廊", "中心", "创润（西昌）高纯钛", "印度", "玉出昆冈", "星辰在线", "银江镇阿署达村", "蒙电服务", "高通公司", "金麒麟", "大运河", "蛇舞新春", "百福齐臻", "红嘴鸥", "谷歌", "高盛", "宝马", "厦门", "未来招商", "财达证券", "巴克莱", "人寿保险", "劳合社", "江汽集团", "江波龙", "约翰逊", "埃隆・马斯克", "上海瑞晨泵业有限公司", "高德恩科技有限公司", "恒叶心（上海）材料科技有限公司", "上海华润瑞宸置业有限公司", "中铁银通", "上海拜高高分子材料有限公司", "航空航天飞行器", "万科", "圳铁路投资建设集团有限公司", "黄石经济技术开发区", "天润科技", "晋剧", "定军山", "芯涛微电子", "温江高新技术产业园区", "中瑞建交", "华陆新材", "徽墨", "##ysolar", "四川电网", "一汽解放汽车有限公司", "安集延洛奇", "邹平一电三厂", "爱马仕", "海南", "以色列", "响水工业经济区", "塔吉克斯坦", "塔罗贡水电站", "塔吉克斯", "抖音", "祐富百胜宝电器（深圳）有限公司", "哪吒精神", "重庆燃气集团", "麒灵", "小米汽车", "阿联酋", "xboxSeriesS", "肇庆市产业集团有限公司", "内蒙古", "北京市公园", "北京地铁", "国际国内", "中国杂技团", "景德镇", "基莱斯", "广之旅", "旅游巴士", "FBI", "三七互娱", "丰富数据", "广汽集团", "未来钱", "俄罗斯", "特朗普", "中奢奥莱", "苏宁易购", "襄阳樊西智慧物流园区", "山东新视觉数码科技有限公司", "金融", "海爱讯信迪通信息科技有限公司", "深圳市铂科新材料销售有限公司", "上海浐策实业有限公司", "首钢", "昆明邦立置业有限公司", "港航", "克劳斯", "SuperMaterials", "派拓网络公司", "艾芙隆海湾社区", "江苏法尔胜股份有限公司", "美国军事学院", "黑龙江", "柏志国", "沈阳滨", "岭南控股", "安徽鑫铂铝业股份有限公司", "龙泉股份", "三星", "德皓事务所", "野山参", "明微电子", "锡基钙钛矿", "生态气象云服务", "扬州大学动物科学与技术学院肉鹅育种", "泡泡玛特", "航天卫星技术有限公司", "复星旅游文化", "冠军科技集团", "海纳国际集团", "雷蒙德詹姆斯公司", "RedRockResorts", "丹佛"];
        const allScores = [[1, 1, 1, 2, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 1, 1, 3], [1, 1, 1, 1, 2, 1], [1, 1, 1, 2, 1, 1], [4, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 3, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 2], [2, 1, 1, 1, 1, 1], [4, 1, 1, 3, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [4, 1, 2, 1, 3, 1], [1, 1, 1, 1, 2, 1], [2, 1, 2, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 3, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [4, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 2, 1], [1, 1, 2, 1, 1, 1], [1, 1, 1, 1, 2, 1], [4, 1, 1, 3, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 2, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [4, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 2, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 2], [1, 1, 2, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 2], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 2], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 1, 2, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 2, 1, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 2, 1, 1, 1], [3, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 1, 8], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [1, 1, 1, 1, 1, 2], [1, 1, 1, 2, 1, 1], [1, 1, 1, 1, 2, 1], [1, 1, 1, 1, 2, 1], [1, 1, 1, 2, 1, 1], [3, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 2, 1], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 2, 1], [1, 1, 1, 1, 1, 2], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [3, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 1, 2], [1, 1, 1, 2, 1, 1], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 1, 2], [2, 1, 1, 1, 1, 1], [3, 1, 1, 1, 1, 2], [3, 1, 1, 1, 1, 1], [1, 1, 1, 3, 1, 1], [1, 1, 2, 1, 1, 1], [1, 1, 1, 1, 1, 2], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 2, 1, 1], [3, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 2, 1, 1, 1, 1], [1, 1, 2, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 2, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [1, 1, 1, 2, 1, 1], [2, 1, 2, 1, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 1, 2], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 2], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 1, 2], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 2, 1], [1, 1, 1, 1, 1, 2], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 2, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 1, 1, 2], [1, 1, 1, 2, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 2], [1, 1, 2, 1, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 2], [1, 1, 1, 2, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 1, 2], [1, 1, 1, 2, 1, 1], [1, 1, 1, 1, 1, 2], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [3, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 1, 3, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [3, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 2, 1], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 2], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 1, 2, 1], [1, 1, 1, 1, 2, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 1, 2], [2, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 1, 2]];

        // 分页参数
        const pageSize = 10;
        let currentPage = 1;
        const totalPages = Math.ceil(allCompanies.length / pageSize);

        function getPageData(page) {
            const start = (page - 1) * pageSize;
            const end = Math.min(start + pageSize, allCompanies.length);

            const companies = allCompanies.slice(start, end);
            const scores = allScores.slice(start, end);
            const totalScores = scores.map(s => (s.reduce((a, b) => a + b, 0) / s.length).toFixed(2));

            // 按总评分升序排序
            const sorted = companies.map((name, i) => ({
                name,
                scores: scores[i],
                total: totalScores[i]
            })).sort((a, b) => a.total - b.total);

            return {
                names: sorted.map(c => c.name),
                scores: sorted.map(c => c.scores),
                totals: sorted.map(c => c.total)
            };
        }

        function renderHeatmap(page) {
            const { names, scores, totals } = getPageData(page);
            const data = [];

            for (let i = 0; i < names.length; i++) {
                for (let j = 0; j < risks.length; j++) {
                    data.push([j, i, scores[i][j]]);
                }
                data.push([risks.length, i, parseFloat(totals[i])]);
            }

            const option = {
                title: {
                    text: '公司风险热力图',
                    left: 'center',
                    top: 10,
                    padding: [0, 0, 20, 0]
                },
                tooltip: {
                    formatter: function (params) {
                        const isTotal = params.value[0] === risks.length;
                        const company = names[params.value[1]];
                        const label = isTotal ? '总评分' : risks[params.value[0]];
                        return `${company}<br/>${label}：<strong>${params.value[2]}</strong>`;
                    }
                },
                grid: {
                    left: '10%',
                    right: '10%',
                    bottom: '15%',
                    top: '20%'
                },
                xAxis: {
                    type: 'category',
                    data: [...risks, '风险指数'],
                    position: 'top',
                    splitArea: { show: true },
                    axisLabel: {
                        interval: 0,
                        rotate: 30,
                        margin: 15
                    }
                },
                yAxis: {
                    type: 'category',
                    data: names,
                    splitArea: { show: true },
                    axisLabel: { margin: 15 }
                },
                visualMap: {
                    min: 0,
                    max: 10,
                    calculable: true,
                    orient: 'horizontal',
                    left: 'center',
                    bottom: '5%'
                },
                series: [{
                    name: '风险得分',
                    type: 'heatmap',
                    data: data,
                    label: { show: true },
                    emphasis: {
                        itemStyle: {
                            shadowBlur: 10,
                            shadowColor: 'rgba(0, 0, 0, 0.5)'
                        }
                    }
                }]
            };

            const chartDom = document.getElementById('main');
            const myChart = echarts.init(chartDom);
            myChart.setOption(option);

            document.getElementById('page-info').textContent = `第 ${currentPage} / ${totalPages} 页`;
        }

        document.getElementById('prev-page').onclick = () => {
            if (currentPage > 1) {
                currentPage--;
                renderHeatmap(currentPage);
            }
        };

        document.getElementById('next-page').onclick = () => {
            if (currentPage < totalPages) {
                currentPage++;
                renderHeatmap(currentPage);
            }
        };

        // 初始加载
        renderHeatmap(currentPage);
    </script>
</body>
</html>
