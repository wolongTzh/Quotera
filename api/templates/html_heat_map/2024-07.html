<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>公司风险热力图（分页）</title>
    <script src="https://cdn.jsdelivr.net/npm/echarts@5/dist/echarts.min.js"></script>
    <style>
        #main {
            width: 1000px;
            height: 600px;
            margin: 20px auto;
        }
        #pagination {
            text-align: center;
            margin-bottom: 20px;
        }
        #pagination button {
            margin: 0 5px;
            padding: 5px 10px;
            font-size: 14px;
            cursor: pointer;
        }
        #page-info {
            margin: 0 10px;
        }
    </style>
</head>
<body>
    <div id="pagination">
        <button id="prev-page">上一页</button>
        <span id="page-info"></span>
        <button id="next-page">下一页</button>
    </div>
    <div id="main"></div>

    <script>
        const risks = ['公司治理风险', '法律与合规风险', '财务与偿付风险', '信息披露风险', '经营稳定风险', '声誉与外部评级风险'];

        // 模拟 30 家公司
        const allCompanies = ["未来", "呼和浩特市文化旅游广电局", "越城体育", "美丽江苏", "山水林田湖草沙", "中密控股", "宇通客车", "呷哺呷哺", "小米", "Coach", "Weford国际", "富国银行", "阳江", "好客", "稻田画", "珠海格力信息科技有限公司", "河北峰煤焦化有限公司", "康诺亚", "苹果", "泳道", "ui#th", "习水县农产品质量检验检测中心", "金山银山", "联想", "新华社", "内河航道", "中信银行温州分行", "隆基绿能", "全球共享发展行动论坛", "龙岗区", "仪征经济开发集团有限公司", "新浪", "内江市隆昌市石碾镇渔箭小学", "楚天科技股份有限公司", "派林生物", "金卡智能集团股份有限公司", "美团", "赛美特", "五星大通", "越秀区", "纽蒙特", "新疆轮台县科源种业公司", "新时代", "江西省体育局", "俄罗斯", "印度", "长城", "体育", "通海县秀山公园", "红土田", "云南省", "红河卫生职业学院", "哈尼梯田", "澜沧江黎明大桥", "迪拜航空", "北京宏诚创新科技有限公司", "南博会", "长沙市光储", "中心", "铜仁市万泽社会服务发展中心", "拜登", "坎托菲茨杰拉德公司", "迈克尔", "海铁联运", "新东方优编程", "兰陵", "宝洁", "纽威", "ReTransMeProducts", "鸟啸酒厂", "中国新疆", "重商亲商", "爱马仕", "百雀羚", "横琴天沐河", "宝能广州国际体育演艺中心", "湖南移动", "尼泊尔", "中国商飞", "我爱我家", "湖州吴兴农商银行", "兰州市轨道交通有限公司", "化工仪器", "欧森家居", "南京沪江复合材料股份有限公司", "以色列", "武汉冰雪中心", "郑场教育发展促进会", "民生银行深圳桃园支行", "盛和资源", "麻衣寺", "中福黄金", "云卡子县艺术团", "文迪", "城市超人", "恒大汽车", "沙县区小吃文旅集团有限公司", "埃塞俄比亚", "宝马", "东方甄选", "杭州凯凯体育文化有限公司", "天河城", "均普智能", "白礁慈济祖宫", "漳州台商投资区", "金梓才", "国统股份", "软通动力", "鸿蓥武艺", "中影发行", "g证券", "北京市场", "沈雪同梦", "大成基金", "新华社香港", "麦西热甫", "华声在线", "步步高", "德昂酸茶", "云南", "陕煤铜川矿业公司", "华为", "山东黄岛海关", "新凤鸣集团", "保时捷中国", "广东省博物馆", "国金证券", "金岩高新", "山西兆丰天成铝材公司", "中国书法", "步步高超市", "懂车帝", "一汽模具制造有限公司", "水家湖货运站", "中国风景名胜区", "鄂尔多斯", "浙江机电职业技术大学", "中国电力", "仰韶酒业", "云南白药集团", "奥林匹克", "博士服务团", "诶吉利斯公司", "南亚东南亚数字合作", "福建省科协", "溧水", "草草", "Netflix", "银江技术证券", "东实环境公司", "茂名市", "中国广核", "奇富科技", "Bluemoon", "万沙中学", "腾冲团田国际垂钓竞技公司", "喀什", "阿拉巴达", "云南交投集团", "正和生态", "汉商集团", "加拿大皇家银行", "EdgeshoreTherapeutics", "中新社", "安徽大学", "北京新房", "北京新东方迅程网络科技有限公司", "伊戈尔", "荣昌区", "小鹏汇天", "北约核共享", "洛可莱焕活修护面膜", "匈牙利", "中国工程院", "中国体育", "安宁市太平新城街道", "积石山", "泉州海峡职业培训学校", "巴黎奥运会", "中锐股份", "云南巨力集团", "小董", "辉同行", "AMD", "京东", "广电广电", "广州市工业和信息化局", "永辉超市", "长庆油田采油五厂", "天水麻辣烫", "甘肃泽玲工程项目管理有限公司", "海尔卡奥斯", "合肥演艺集团", "中国北斗应用大会", "武汉东湖高新区滨湖街道", "云川", "禅城", "宏胜集团", "江苏高倍智能装备有限公司", "山东洛恒化工产品有限公司", "济南骏腾化工有限公司", "气球贷", "江龙船艇", "得利斯", "五矿证券", "格拉斯哥", "你", "中石化炼化工程", "泸县龙文化", "桥蓥村", "南强村", "工银航运金融租赁有限公司", "中海海洋石油集团有限公司", "盒马", "北京轨道交通", "湖南女学堂", "华大基因", "鲁比奥", "建信人寿陕西分公司", "泰康人寿", "骏鼎达", "腾讯", "会仙洞", "汕头市金平区人民法院", "东江大道", "红色基因", "晋江安海龙山寺", "瑞典火柴", "江西百胜智能科技股份有限公司", "利和兴", "奇瑞", "2024文化遗产保护数字化国际论坛", "小菜园国际控股有限公司", "万物", "千佛山", "土木交通工程", "天津中医药大学", "星河碧野", "区直机关", "铁打", "沃尔夫", "江苏培育文旅消费", "鱼卡公司", "山东宏洋化学有限公司", "南正源净水材料有限公司", "湖南", "天津市大众蹦床", "北京金帆艺术团", "ProvforFinancialServices", "皮帕克格拉德斯通金融", "农业农村部", "北部湾港集团", "山东港口烟台港股份有限公司", "Sovnaft", "高澜股份", "问界", "拼多多", "一stSource", "GoDergy", "商业银行", "SeacoastBank", "达坂城", "佛山市深挖醒狮", "江苏省扬州港", "中农融信", "嘉定", "闲鱼", "中远海运集运", "九州量子", "众成就传媒创意", "金砖机制", "方盛股份", "创业黑马科技集团股份有限公司", "实朴检测", "里海国家通讯社", "尚文菊", "现代牙科", "南方锰业投资有限公司", "标准发展集团", "对冲基金", "南城医院", "卡里奥拉", "哪吒汽车", "天津银行", "广西农信社联合社", "乔山健康文化中心", "山东省社会信用中心", "景龙门遗址", "和美乡村建设", "脸书", "Foma集团", "广州市青年文化宫", "阳江开宝新材料实业有限公司", "深中通道", "智能网联汽车", "长春国际汽车博览会", "智利", "沃洛金", "上汽乘用车", "特斯拉", "特鲁多", "云南公司文山分公司", "未来电商中心", "武强", "恒勃股份", "耐克", "长春城投南溪里文旅小镇", "蒂尔", "QQ", "考瑞亚", "华侨大学", "云南区", "南村镇", "乐平", "花果山", "上海外高桥造船", "洋丰苹果肥", "中国一重集团有限公司", "谷歌", "星巴克", "沃特股份", "润普食品", "优丝俪", "YP", "中国人民银行", "沈阳南焊轨基地", "瓦日铁路", "山西现代循环经济研究院", "志邦家居", "花硒谷", "华夏未来少儿艺术中心", "荣将镇", "全国青年", "云南昆明", "西双版", "北京中轴线", "翠竹外国语小学", "沈阳", "丰乐种业", "京能电力", "长图设计", "衡阳市", "好房节", "高尔夫", "氢通新能源", "无锡高新区", "云南音乐", "通密线", "大运河", "华成大酒店", "万象", "华中科技大学", "西门子", "航天育种", "福建省美丽乡村设计创意大赛"];
        const allScores = [[7, 1, 1, 3, 2, 1], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [1, 1, 1, 1, 2, 1], [1, 1, 1, 1, 1, 2], [3, 1, 1, 1, 2, 1], [1, 1, 1, 1, 2, 1], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 1, 3], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [4, 1, 1, 1, 1, 2], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 2], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 1, 2, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 1, 2], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 1, 1, 2], [2, 1, 1, 2, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 2], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [3, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 3], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 2], [1, 1, 1, 2, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 2, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 2], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 2, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 2, 1], [3, 1, 1, 1, 1, 1], [3, 1, 1, 2, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 2], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 1, 2, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 2], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 1, 2], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 1, 2, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 1, 2, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 2, 3, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [3, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [4, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 1, 3, 1], [1, 1, 1, 1, 2, 1], [1, 1, 2, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [1, 1, 1, 1, 1, 2], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 1, 1, 3], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 1, 1, 2], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [1, 1, 1, 1, 2, 1], [3, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 2], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 1, 2], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [3, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 2], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 2], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 2], [1, 1, 1, 1, 2, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 1, 2, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 2, 1, 1], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 1, 2, 1], [2, 1, 1, 1, 1, 1], [1, 1, 1, 2, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1], [2, 1, 1, 1, 1, 1]];

        // 分页参数
        const pageSize = 10;
        let currentPage = 1;
        const totalPages = Math.ceil(allCompanies.length / pageSize);

        function getPageData(page) {
            const start = (page - 1) * pageSize;
            const end = Math.min(start + pageSize, allCompanies.length);

            const companies = allCompanies.slice(start, end);
            const scores = allScores.slice(start, end);
            const totalScores = scores.map(s => (s.reduce((a, b) => a + b, 0) / s.length).toFixed(2));

            // 按总评分升序排序
            const sorted = companies.map((name, i) => ({
                name,
                scores: scores[i],
                total: totalScores[i]
            })).sort((a, b) => a.total - b.total);

            return {
                names: sorted.map(c => c.name),
                scores: sorted.map(c => c.scores),
                totals: sorted.map(c => c.total)
            };
        }

        function renderHeatmap(page) {
            const { names, scores, totals } = getPageData(page);
            const data = [];

            for (let i = 0; i < names.length; i++) {
                for (let j = 0; j < risks.length; j++) {
                    data.push([j, i, scores[i][j]]);
                }
                data.push([risks.length, i, parseFloat(totals[i])]);
            }

            const option = {
                title: {
                    text: '公司风险热力图',
                    left: 'center',
                    top: 10,
                    padding: [0, 0, 20, 0]
                },
                tooltip: {
                    formatter: function (params) {
                        const isTotal = params.value[0] === risks.length;
                        const company = names[params.value[1]];
                        const label = isTotal ? '总评分' : risks[params.value[0]];
                        return `${company}<br/>${label}：<strong>${params.value[2]}</strong>`;
                    }
                },
                grid: {
                    left: '10%',
                    right: '10%',
                    bottom: '15%',
                    top: '20%'
                },
                xAxis: {
                    type: 'category',
                    data: [...risks, '风险指数'],
                    position: 'top',
                    splitArea: { show: true },
                    axisLabel: {
                        interval: 0,
                        rotate: 30,
                        margin: 15
                    }
                },
                yAxis: {
                    type: 'category',
                    data: names,
                    splitArea: { show: true },
                    axisLabel: { margin: 15 }
                },
                visualMap: {
                    min: 0,
                    max: 10,
                    calculable: true,
                    orient: 'horizontal',
                    left: 'center',
                    bottom: '5%'
                },
                series: [{
                    name: '风险得分',
                    type: 'heatmap',
                    data: data,
                    label: { show: true },
                    emphasis: {
                        itemStyle: {
                            shadowBlur: 10,
                            shadowColor: 'rgba(0, 0, 0, 0.5)'
                        }
                    }
                }]
            };

            const chartDom = document.getElementById('main');
            const myChart = echarts.init(chartDom);
            myChart.setOption(option);

            document.getElementById('page-info').textContent = `第 ${currentPage} / ${totalPages} 页`;
        }

        document.getElementById('prev-page').onclick = () => {
            if (currentPage > 1) {
                currentPage--;
                renderHeatmap(currentPage);
            }
        };

        document.getElementById('next-page').onclick = () => {
            if (currentPage < totalPages) {
                currentPage++;
                renderHeatmap(currentPage);
            }
        };

        // 初始加载
        renderHeatmap(currentPage);
    </script>
</body>
</html>
